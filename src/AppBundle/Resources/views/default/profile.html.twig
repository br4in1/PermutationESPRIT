{% extends 'base.html.twig' %}

{% block body %}
    <!-- Titlebar
    ================================================== -->
    <div id="titlebar" class="gradient">
        <div class="container">
            <div class="row">
                <div class="col-md-12">

                    <div style="margin-top: -95px;" class="user-profile-titlebar">
                        {% if user.id is same as(app.user.id) %}
                            <input type="file" hidden id="imgupload" name="imgupload">
                            <figure style="top: 95px;" class="imghvr-fade">
                                <img style="height: 110px; width: 110px;" id="user-img" src="{{ asset('assets/images/users_pics/' ~ user.picture) }}" alt="">
                                <figcaption id="OpenImgUpload" style="padding-left: 43%; padding-top: 43%; cursor:pointer;">
                                    <div><i class="fa fa-upload"></i></div>
                                </figcaption>
                            </figure>
                        {% else %}
                            <img class="user-profile-avatar" src="{{ asset('assets/images/users_pics/' ~ user.picture) }}" alt="">
                        {% endif %}
                        <div class="user-profile-name list-inline">
                            <li class="list-inline-item"><h1 style="font-weight: bolder;">{{ user.firstname~" "~user.lastname }}</h1></li>
                            <li class="list-inline-item"><h4>({{ user.classe }})</h4></li>
                        </div>
                    </div>
                    {% if user.email is same as(app.user.email)  %}
                        <div class="user-profile-name">
                            <a href="{{ path('fos_user_profile_edit') }}" class="button"><i class="fa fa-pencil"></i> Modifier</a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>



    <!-- Content
    ================================================== -->
    <div class="container">
        <div class="row sticky-wrapper">


            <!-- Sidebar
            ================================================== -->
            <div class="col-lg-4 col-md-4 margin-top-0">
                <!-- Contact -->
                <div class="boxed-widget margin-top-30 margin-bottom-50">
                    <h3>Coordonnées</h3>
                    <ul class="listing-details-sidebar">
                        <li><i class="sl sl-icon-phone"></i> {{ user.phone }}
                            {% if user.email is same as(app.user.email) %}
                                <a title="Afficher ou masquer mon numéro au public." id="show-hide-phone" href="#"><i id="eye-container" class="sl sl-icon-eye" style="{% if prefs.phonenumbervisible %} color: rgb(0, 128, 0); {% else %} color: rgb(139, 0, 0); {% endif %} font-weight:bolder; margin-left: 90%;"></i></a>
                            {% endif %}
                        </li>
                        <li><i class="fa fa-envelope-o"></i> <a href="#"> {{ user.email }}</a></li>
                        <li><i class="fa fa-calendar"></i> Membre depuis : {{ user.registrationdate|date("d F Y") }}</li>
                    </ul>

                    <ul class="listing-details-sidebar social-profiles">
                        {% if false %}
                            <li><a href="#" class="facebook-profile"><i class="fa fa-facebook-square"></i> Facebook</a></li>
                        {% endif %}
                    </ul>

                    {% if user.email is not same as(app.user.email) %}
                        <!-- Reply to review popup -->
                        <div id="small-dialog" class="zoom-anim-dialog mfp-hide">
                            <div class="small-dialog-header">
                                <h3>Envoyer un message</h3>
                            </div>
                            <div class="message-reply margin-top-0">
                                <textarea cols="40" rows="3" placeholder="Votre message pour {{ user.firstname }}"></textarea>
                                <button class="button">Envoyer</button>
                            </div>
                        </div>
                    {% endif %}
                    {% if user.email is not same as(app.user.email) %}
                        <a href="#small-dialog" class="send-message-to-owner button popup-with-zoom-anim"><i class="sl sl-icon-envelope-open"></i> Send Message</a>
                    {% endif %}
                </div>
                <!-- Contact / End-->

            </div>
            <!-- Sidebar / End -->


            <!-- Content
            ================================================== -->
            <div class="col-lg-8 col-md-8 padding-left-30">

                <h3 class="margin-top-0 margin-bottom-40">Tom's Listings</h3>

                <!-- Listings Container -->
                <div class="row">

                    <!-- Listing Item -->
                    <div class="col-lg-12 col-md-12">
                        <div class="listing-item-container list-layout">
                            <a href="listings-single-page.html" class="listing-item">

                                <!-- Image -->
                                <div class="listing-item-image">
                                    <img src="images/listing-item-01.jpg" alt="">
                                    <span class="tag">Eat & Drink</span>
                                </div>

                                <!-- Content -->
                                <div class="listing-item-content">
                                    <div class="listing-badge now-open">Now Open</div>

                                    <div class="listing-item-inner">
                                        <h3>Tom's Restaurant</h3>
                                        <span>964 School Street, New York</span>
                                        <div class="star-rating" data-rating="3.5">
                                            <div class="rating-counter">(12 reviews)</div>
                                        </div>
                                    </div>

                                    <span class="like-icon"></span>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- Listing Item / End -->

                    <!-- Listing Item -->
                    <div class="col-lg-12 col-md-12">
                        <div class="listing-item-container list-layout">
                            <a href="listings-single-page.html" class="listing-item">

                                <!-- Image -->
                                <div class="listing-item-image">
                                    <img src="images/listing-item-03.jpg" alt="">
                                    <span class="tag">Hotels</span>
                                </div>

                                <!-- Content -->
                                <div class="listing-item-content">

                                    <div class="listing-item-inner">
                                        <h3>Hotel Govendor</h3>
                                        <span>778 Country Street, New York</span>
                                        <div class="star-rating" data-rating="2.0">
                                            <div class="rating-counter">(17 reviews)</div>
                                        </div>
                                    </div>

                                    <span class="like-icon"></span>

                                    <div class="listing-item-details">Starting from $59 per night</div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- Listing Item / End -->

                    <!-- Listing Item -->
                    <div class="col-lg-12 col-md-12">
                        <div class="listing-item-container list-layout">
                            <a href="listings-single-page.html" class="listing-item">

                                <!-- Image -->
                                <div class="listing-item-image">
                                    <img src="images/listing-item-04.jpg" alt="">
                                    <span class="tag">Eat & Drink</span>
                                </div>

                                <!-- Content -->
                                <div class="listing-item-content">
                                    <div class="listing-badge now-open">Now Open</div>

                                    <div class="listing-item-inner">
                                        <h3>Burger House</h3>
                                        <span>2726 Shinn Street, New York</span>
                                        <div class="star-rating" data-rating="5.0">
                                            <div class="rating-counter">(31 reviews)</div>
                                        </div>
                                    </div>

                                    <span class="like-icon"></span>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- Listing Item / End -->

                    <div class="col-md-12 browse-all-user-listings">
                        <a href="#">Browse All Listings <i class="fa fa-angle-right"></i> </a>
                    </div>

                </div>
                <!-- Listings Container / End -->


                <!-- Reviews -->
                <div id="listing-reviews" class="listing-section">
                    <h3 class="margin-top-60 margin-bottom-20">Reviews</h3>

                    <div class="clearfix"></div>

                    <!-- Reviews -->
                    <section class="comments listing-reviews">

                        <ul>
                            <li>
                                <div class="avatar"><img src="http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;s=70" alt="" /></div>
                                <div class="comment-content"><div class="arrow-comment"></div>
                                    <div class="comment-by">Kathy Brown <div class="comment-by-listing">on <a href="#">Burger House</a></div> <span class="date">June 2017</span>
                                        <div class="star-rating" data-rating="5"></div>
                                    </div>
                                    <p>Morbi velit eros, sagittis in facilisis non, rhoncus et erat. Nam posuere tristique sem, eu ultricies tortor imperdiet vitae. Curabitur lacinia neque non metus</p>

                                    <div class="review-images mfp-gallery-container">
                                        <a href="images/review-image-01.jpg" class="mfp-gallery"><img src="images/review-image-01.jpg" alt=""></a>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div class="avatar"><img src="http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;s=70" alt="" /> </div>
                                <div class="comment-content"><div class="arrow-comment"></div>
                                    <div class="comment-by">John Doe <div class="comment-by-listing">on <a href="#">Tom's Restaurant</a></div> <span class="date">May 2017</span>
                                        <div class="star-rating" data-rating="4"></div>
                                    </div>
                                    <p>Commodo est luctus eget. Proin in nunc laoreet justo volutpat blandit enim. Sem felis, ullamcorper vel aliquam non, varius eget justo. Duis quis nunc tellus sollicitudin mauris.</p>
                                </div>
                            </li>

                            <li>
                                <div class="avatar"><img src="http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;s=70" alt="" /></div>
                                <div class="comment-content"><div class="arrow-comment"></div>
                                    <div class="comment-by">Kathy Brown <div class="comment-by-listing">on <a href="#">Burger House</a></div> <span class="date">June 2017</span>
                                        <div class="star-rating" data-rating="5"></div>
                                    </div>
                                    <p>Morbi velit eros, sagittis in facilisis non, rhoncus et erat. Nam posuere tristique sem, eu ultricies tortor imperdiet vitae. Curabitur lacinia neque non metus</p>

                                    <div class="review-images mfp-gallery-container">
                                        <a href="images/review-image-02.jpg" class="mfp-gallery"><img src="images/review-image-02.jpg" alt=""></a>
                                        <a href="images/review-image-03.jpg" class="mfp-gallery"><img src="images/review-image-03.jpg" alt=""></a>
                                    </div>
                                </div>
                            </li>

                            <li>
                                <div class="avatar"><img src="http://www.gravatar.com/avatar/00000000000000000000000000000000?d=mm&amp;s=70" alt="" /> </div>
                                <div class="comment-content"><div class="arrow-comment"></div>
                                    <div class="comment-by">John Doe <div class="comment-by-listing">on <a href="#">Hotel Govendor</a></div> <span class="date">May 2017</span>
                                        <div class="star-rating" data-rating="5"></div>
                                    </div>
                                    <p>Commodo est luctus eget. Proin in nunc laoreet justo volutpat blandit enim. Sem felis, ullamcorper vel aliquam non, varius eget justo. Duis quis nunc tellus sollicitudin mauris.</p>
                                </div>

                            </li>
                        </ul>
                    </section>

                    <!-- Pagination -->
                    <div class="clearfix"></div>
                    <div class="row">
                        <div class="col-md-12">
                            <!-- Pagination -->
                            <div class="pagination-container margin-top-30">
                                <nav class="pagination">
                                    <ul>
                                        <li><a href="#" class="current-page">1</a></li>
                                        <li><a href="#">2</a></li>
                                        <li><a href="#"><i class="sl sl-icon-arrow-right"></i></a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <!-- Pagination / End -->
                </div>


            </div>

        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script language="JavaScript">
        $('#show-hide-phone').click(function (event) {
            event.preventDefault();
            $.ajax({
                url:    "{{ path('show_hide_phone') }}",
                method: "post"
            }).done(function (data) {
                if(data.success === true){
                    if($('#eye-container').css('color') == 'rgb(0, 128, 0)') $('#eye-container').css('color','darkred');
                    else $('#eye-container').css('color','green');
                }
            });
        });
        {% if user.email is same as(app.user.email) %}
            $('#OpenImgUpload').click(function () {
                $('#imgupload').trigger('click');
            });
            $('#imgupload').on('change', function (e) {
                var data = new FormData();
                $.each($('#imgupload')[0].files, function (i, file) {
                    data.append('file-' + i, file);
                });
                $.ajax({
                    url: "{{ path('change_user_photo') }}",
                    type: "post",
                    cache: false,
                    contentType: false,
                    processData: false,
                    data: data,
                    success: function (data) {
                        if (data.success === true) {
                            $('#user-img').attr('src', data.url);
                        }
                    }
                });
            });
        {% endif %}
    </script>
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/css/imagehover.css') }}">
{% endblock %}